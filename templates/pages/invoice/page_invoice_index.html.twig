{% extends "base.html.twig" %}

{% set title = "Invox | Invoice" %}

{% block content %}

    <div class="flex justify-between">
        <h1>Facture</h1>
    </div>
    {# <twig:DivLive /> #}
    {# {{ form_start(form) }}
        {{ form_widget(form) }}
    {{ form_end(form) }} #}
    <div class="flex justify-end mt-6 gap-2">
        <twig:Button content="Créer une facture" path="invoice/new"/>
    </div>
    <div>
        <twig:Table modal="{{ modal }}"
                    theads="{{ {"id":"Numéro","customer":"Client","total":"Total TTC","status":"Status","createdAt":"Crée le", "updatedAt":"Echeance"} }}"
                    pathEdit="app_invoice_edit"
                    pathDelete="invoice_delete" data="{{ data }}" invoiceItem="{{ invoiceItem }}"
                    products="{{ products }}"/>
    </div>

    {% if app.session.flashbag.has('success') %}
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Cette ligne récupère le message flash
                const message = "{{ app.session.flashbag.get('success')[0] }}";
                // Cette ligne utilise Notyf pour afficher le message flash
                notyf.success("Success message");
            });
        </script>
    {% endif %}


{% endblock %}